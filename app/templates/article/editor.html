
{% extends "main/base.html" %}

{% block content %}

<body class="hold-transition skin-blue sidebar-mini">
<!-- Content Header (Page header) -->
<section class="content-header">
    <h1>
        Edit a Article
        <small></small>
    </h1>
    <ol class="breadcrumb">
        <li><a href="#"><i class="fa fa-dashboard"></i> Dashboard</a></li>
        <li><a href="#">Articles</a></li>
        <li class="active">Add</li>
    </ol>
</section>

<!-- Main content -->
<section class="content">
    <div class="row">
        <div class="col-md-12 col-lg-10">
            <div class="box">
                {% with messages = get_flashed_messages() %}
                  {% if messages %}
                    {% for message in messages %}
                    <p class="login-box-msg" style="color: #b92c28;">{{ message }}</p>
                    {% endfor %}
                  {% endif %}
                {% endwith %}
                <form action="" method="post" novalidate>
                    {{ article_form.hidden_tag() }}
                    <div class="box-header">
                        <div class="form-group">
                          <label for="title">Enter a Title</label>
                          <!--<input type="email" class="form-control" id="title" placeholder="Enter email">-->
                            {{article_form.title(id='title', class='form-control', placeholder=article_form.title.label.text)}}
                            {% for error in article_form.title.errors %}
                            <span style="color: red;">[{{ error }}]</span>
                            {% endfor %}
                        </div>
                        <div class="form-group">
                          <label for="intro">Introduction</label>
                            {{article_form.intro(id='intro', class='form-control', placeholder=article_form.intro.label.text)}}
                            {% for error in article_form.intro.errors %}
                            <span style="color: red;">[{{ error }}]</span>
                            {% endfor %}
                        </div>
                        <div class="form-group">
                          <label for="url">URL</label>
                            {{article_form.url(id='url', class='form-control', placeholder=article_form.url.label.text)}}
                            {% for error in article_form.url.errors %}
                            <span style="color: red;">[{{ error }}]</span>
                            {% endfor %}
                        </div>
                    </div>
                    <div class="box-body pad">
                        <div id="content_div">
                            <p>Write your life...</p>
                        </div>
                        {% for error in article_form.content.errors %}
                        <span style="color: red;">[{{ error }}]</span>
                        {% endfor %}
                        {{article_form.content(id='content_area', style='display:none;')}}
                        <!--<textarea id="content_area" style="width:100%; height:200px; display: none;"></textarea>-->
                    </div>
                    {{article_form.submit()}}
                </form>
            </div>
        </div>
        <!-- /.col-->
    </div>
    <!-- ./row -->
</section>
<!-- /.content -->

<script type="text/javascript" src={{url_for('static', filename='plugins/jquery-2.2.3.min.js')}}></script>
<script type="text/javascript" src={{url_for('static', filename='plugins/wangeditor/wangEditor.min.js')}}></script>

<script>
    var E = window.wangEditor
        var editor = new E('#content_div')
        var $content_area = $('#content_area')
        editor.customConfig.onchange = function (html) {
            // 监控变化，同步更新到 textarea
            $content_area.val(html)
        }
        editor.create()
        // 初始化 textarea 的值
        $content_area.val(editor.txt.html())
</script>
</body>

{% endblock %}
